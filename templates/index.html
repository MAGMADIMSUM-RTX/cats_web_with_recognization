{% extends "base.html" %}

{% block title %}主页 - 猫咪相册{% endblock %}

{% block content %}
<div id="title">
    <h1>🐱 猫咪相册</h1>
</div>

<!-- 上传界面 -->
<div id="upload-section" class="upload-section" style="display: none;">
    <h2>📤 上传猫咪图片</h2>
    <form id="upload-form" class="upload-form">
        <div class="form-group">
            <label for="cat-name-input">🐱 猫咪名字:</label>
            <input type="text" id="cat-name-input" name="cat_name" placeholder="请输入猫咪的名字..." required>
        </div>
        
        <div class="form-group">
            <label for="file-input">📷 选择图片:</label>
            <input type="file" id="file-input" name="files" multiple accept="image/*" required>
            <div class="file-info">
                <span>支持 JPG、PNG、GIF、WEBP 格式，最大16MB</span>
            </div>
        </div>
        
        <div class="preview-container" id="preview-container">
            <!-- 预览图片将在这里显示 -->
        </div>
        
        <div class="form-actions">
            <button type="submit" class="upload-btn">🚀 上传图片</button>
            <button type="button" class="recognize-btn" id="recognize-btn">🔍 识别猫咪</button>
            <button type="button" class="cancel-btn" id="cancel-upload-btn">❌ 取消</button>
        </div>
    </form>
    
    <div class="upload-progress" id="upload-progress" style="display: none;">
        <div class="progress-bar-container">
            <div class="progress-bar" id="upload-progress-bar"></div>
        </div>
        <span class="progress-text" id="progress-text">上传中...</span>
        <button id="cancel-upload-btn-progress" class="cancel-btn">取消</button>
    </div>
</div>

<!-- 猫咪图片流 -->
<div id="cat-gallery" class="gallery">
    <!-- 猫咪图片将通过JavaScript动态加载 -->
</div>

<!-- 加载指示器 -->
<div id="loading" class="loading-indicator" style="display: none;">
    <p>🔄 正在加载更多猫咪...</p>
</div>

<!-- 错误消息 -->
<div id="error-message" class="error-message" style="display: none;">
    <p>❌ 加载失败，请稍后重试</p>
    <button id="retry-btn">🔄 重试</button>
</div>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/main.js') }}"></script>
{% endblock %}
